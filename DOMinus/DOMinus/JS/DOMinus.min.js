var DOMinus={};DOMinus.Config={RENDER_LOOP_DELAY:10};DOMinus.Utils={};DOMinus.Utils.setCSSRule=function(n,t,i){i!==null&&i!==undefined?n.css(t,i):n.css(t,"")};DOMinus.Engine=function(n){function s(n){e++;t.render();n&&(n(t,e)||clearInterval(o))}var t=this,r=[],o=null,e=0,i,u,f;typeof n=="string"&&(n=$(n));i=new DOMinus.Value(n);t.viewport=function(n){if(n===undefined)return i.value();typeof n=="string"&&(n=$(n));for(var u=0;u<r.length;u++)r[u].domParent(n);return i.value(n),t};u=new DOMinus.Vector2;t.size=function(n,i){return n===undefined||i===undefined?u:(u.setXY(n,i),t)};f=new DOMinus.Value;t.color=function(n){return n===undefined?f.value():(f.value(n),t)};t.addChild=function(n){return n.domParent(i.value()),r.push(n),t};t.removeChildAt=function(n){return r[n].domParent(null),r.splice(n,1),t};t.getChildrenCount=function(){return r.length};t.getChild=function(n){return r[n]};t.render=function(){var n=!1,o;for(i.isChanged()&&(i.value().addClass("dominus-viewport"),n=!0,i.commit()),(n||u.isXChanged())&&(DOMinus.Utils.setCSSRule(i.value(),"width",u.x()),u.commitX()),(n||u.isYChanged())&&(DOMinus.Utils.setCSSRule(i.value(),"height",u.y()),u.commitY()),(n||f.isChanged())&&(DOMinus.Utils.setCSSRule(i.value(),"background-color",f.value()),f.commit()),o=0;o<r.length;o++)r[o].render(e);return i.value().show(),t};t.renderLoop=function(n){return o=setInterval(function(){s(n)},DOMinus.Config.RENDER_LOOP_DELAY),t}};DOMinus.Node=function(){function w(){var n=!1,o,v,y,p,a;t.isChanged()&&(n=!0,t.commit());(n||u.isXChanged())&&(DOMinus.Utils.setCSSRule(t.value(),"width",u.x()),u.commitX());(n||u.isYChanged())&&(DOMinus.Utils.setCSSRule(t.value(),"height",u.y()),u.commitY());(n||f.isXChanged())&&(DOMinus.Utils.setCSSRule(t.value(),"left",f.x()),f.commitX());(n||f.isYChanged())&&(DOMinus.Utils.setCSSRule(t.value(),"top",f.y()),f.commitY());(n||e.isChanged()||s.isChanged())&&(o="",e.hasValue()&&(o+="scale("+e.x()+","+e.y()+")"),s.hasValue()&&(o+="rotate("+s.value()+"deg)"),DOMinus.Utils.setCSSRule(t.value(),"transform",o),e.commit(),s.commit());(n||h.isChanged())&&(v="",h.hasValue()&&(v=h.x()+"px "+h.y()+"px"),DOMinus.Utils.setCSSRule(t.value(),"transform-origin",v),h.commit());(n||c.isChanged())&&(DOMinus.Utils.setCSSRule(t.value(),"background-color",c.value()),c.commit());(n||l.isChanged())&&(DOMinus.Utils.setCSSRule(t.value(),"opacity",l.value()),l.commit());(n||r.isBorderChanged())&&(y="",r.hasBorderValue()&&(y="solid "+r.thickness()+"px "+r.color()),DOMinus.Utils.setCSSRule(t.value(),"border",y),r.commitBorder());(n||r.isRadiusChanged())&&(DOMinus.Utils.setCSSRule(t.value(),"border-radius",r.radius()),r.commitRadius());(n||i.isImageChanged())&&(p="",i.hasImageValue()&&(p="url("+i.image()+")"),DOMinus.Utils.setCSSRule(t.value(),"background-image",p),i.commitImage());(n||i.isAnimationChanged())&&(a="",i.hasAnimationValue()&&(a+=-(i.currentFrame()*u.x())+"px ",a+=-(i.animationRow()*u.y())+"px"),DOMinus.Utils.setCSSRule(t.value(),"background-position",a),i.commitAnimation())}function b(n){a.hasValue()&&f.sumVector(a);v.hasValue()&&e.sumVector(v);y.hasValue()&&s.sumValueObj(y);i.hasAnimationValue()&&n%i.animationDelay()==0&&i.moveForward()}var n=this,o=[],p=new DOMinus.Value,t,u,f,a,e,v,s,h,y,c,l,r,i;n.domParent=function(t){return t===undefined?p.value():(p.value(t),n.domElement(null),n)};t=new DOMinus.Value;n.domElement=function(i){if(i===undefined)return t.value();for(var r=0;r<o.length;r++)o[r].domParent(i);return t.hasValue()&&t.value().remove(),t.value(i),n};u=new DOMinus.Vector2;n.size=function(t,i){return t===undefined||i===undefined?u:(u.setXY(t,i),n)};f=new DOMinus.Vector2;n.position=function(t,i){return t===undefined||i===undefined?f:(f.setXY(t,i),n)};a=new DOMinus.Vector2;n.positionInc=function(t,i){return t===undefined||i===undefined?a:(a.setXY(t,i),n)};e=new DOMinus.Vector2;n.scale=function(t,i){return t===undefined||i===undefined?e:(e.setXY(t,i),n)};v=new DOMinus.Vector2;n.scaleInc=function(t,i){return t===undefined||i===undefined?v:(v.setXY(t,i),n)};s=new DOMinus.Value;n.rotation=function(t){return t===undefined?s.value():(s.value(t),n)};h=new DOMinus.Vector2;n.rotationOrigin=function(t,i){return t===undefined||i===undefined?h:(h.setXY(t,i),n)};y=new DOMinus.Value;n.rotationInc=function(t){return t===undefined?y.value():(y.value(t),n)};c=new DOMinus.Value;n.color=function(t){return t===undefined?c.value():(c.value(t),n)};l=new DOMinus.Value;n.opacity=function(t){return t===undefined?l.value():(l.value(t),n)};r=new DOMinus.Border;n.border=function(t,i,u){return t===undefined&&i===undefined?r:(r.setBorder(t,i),u!==undefined&&r.radius(u),n)};i=new DOMinus.Sprite;n.sprite=function(t,r,u,f){return t===undefined?i:(i.image(t),r!==undefined&&u!==undefined&&f!==undefined&&i.setAnimation(r,u,f),n)};n.setAsRectangle=function(t,i,r,u,f){return n.position(t,i).size(r,u).border(1,f,0).color("transparent")};n.setAsFilledRectangle=function(t,i,r,u,f,e){return n.setAsRectangle(t,i,r,u,f).color(e)};n.setAsCircle=function(t,i,r,u){return n.position(t-r,i-r).size(r*2,r*2).border(1,u,"50%").color("transparent")};n.setAsFilledCircle=function(t,i,r,u,f){return n.setAsCircle(t,i,r,u).color(f)};n.setAsLine=function(t,i,r,u,f){var e=Math.sqrt(Math.pow(r-t,2)+Math.pow(u-i,2)),o=t!=r?Math.acos((r-t)/e)*360/(Math.PI*2):Math.asin((u-i)/e)*360/(Math.PI*2);return n.setAsFilledRectangle(t,i,e,1,null,f).rotationOrigin(0,0).rotation(o)};n.addChild=function(i){return i.domParent(t.value()),o.push(i),n};n.removeChildAt=function(t){return o[t].domParent(null),o.splice(t,1),n};n.getChildrenCount=function(){return o.length};n.getChild=function(n){return o[n]};n.render=function(i){t.hasValue()||(n.domElement($("<div class='node'/>")),p.value().append(t.value()));w();b(i);for(var r=0;r<o.length;r++)o[r].render(i);return n};n.animate=function(i,r,u){if(n.isChanged()){var f="all "+i+"s "+r;DOMinus.Utils.setCSSRule(t.value(),"transition",f);setTimeout(function(){w();setTimeout(function(){DOMinus.Utils.setCSSRule(t.value(),"transition",null);u&&setTimeout(function(){u()},0)},i*1e3)},0)}return n};n.setSpin=function(n){n?t.value().addClass("spin"):t.value().removeClass("spin")};n.isChanged=function(){return t.isChanged()||u.isChanged()||f.isChanged()||e.isChanged()||s.isChanged()||h.isChanged()||c.isChanged()||l.isChanged()||r.isChanged()||i.isChanged()}};DOMinus.Border=function(){var n=this,i=new DOMinus.Value(1),t,r;n.thickness=function(t){return t===undefined?i.value():(i.value(t),n)};t=new DOMinus.Value;n.color=function(i){return i===undefined?t.value():(t.value(i),n)};r=new DOMinus.Value;n.radius=function(t){return t===undefined?r.value():(r.value(t),n)};n.setBorder=function(n,r){i.value(n);t.value(r)};n.hasBorderValue=function(){return i.hasValue()&&t.hasValue()};n.hasRadiusValue=function(){return r.hasValue()};n.isBorderChanged=function(){return i.isChanged()||t.isChanged()};n.isRadiusChanged=function(){return r.isChanged()};n.isChanged=function(){return n.isBorderChanged()||n.isRadiusChanged()};n.commitBorder=function(){return i.commit(),t.commit(),n};n.commitRadius=function(){r.commit()}};DOMinus.Sprite=function(n){var t=this,f=new DOMinus.Value(n),r,u,e,i;t.image=function(n){return n===undefined?f.value():(f.value(n),t)};r=new DOMinus.Value;t.animationRow=function(n){return n===undefined?r.value():(r.value(n),t)};u=new DOMinus.Value;t.animationLength=function(n){return n===undefined?u.value():(u.value(n),t)};e=new DOMinus.Value;t.animationDelay=function(n){return n===undefined?e.value():(e.value(n),t)};i=new DOMinus.Value(0);t.currentFrame=function(n){return n===undefined?i.value():(i.value(n),t)};t.setAnimation=function(n,f,o){return r.value(n),u.value(f),e.value(o),i.value(0),t};t.moveForward=function(){return i.value((i.value()+1)%u.value()),t};t.hasImageValue=function(){return f.hasValue()};t.hasAnimationValue=function(){return r.hasValue()&&u.hasValue()&&e.hasValue()&&i.hasValue()};t.isImageChanged=function(){return f.isChanged()};t.isAnimationChanged=function(){return r.isChanged()||i.isChanged()};t.isChanged=function(){return t.isImageChanged()||t.isAnimationChanged()};t.commitImage=function(){return f.commit(),t};t.commitAnimation=function(){return r.commit(),i.commit(),t}};DOMinus.Vector2=function(n,t){var i=this,u=new DOMinus.Value(n),r;i.x=function(n){return n===undefined?u.value():(u.value(n),i)};r=new DOMinus.Value(t);i.y=function(n){return n===undefined?r.value():(r.value(n),i)};i.setXY=function(n,t){return u.value(n),r.value(t),i};i.sumXY=function(n,t){return i.setXY(u.value()+n,r.value()+t),i};i.sumVector=function(n){return i.sumXY(n.x(),n.y()),i};i.mulScalar=function(n){return i.setXY(u.value()*n,r.value()*n),i};i.hasValue=function(){return u.hasValue()&&r.hasValue()};i.isXChanged=function(){return u.isChanged()};i.isYChanged=function(){return r.isChanged()};i.isChanged=function(){return i.isXChanged()||i.isYChanged()};i.commitX=function(){return u.commit(),i};i.commitY=function(){return r.commit(),i};i.commit=function(){return i.commitX().commitY(),i}};DOMinus.Value=function(n){var t=this,r=!0,i=n;t.value=function(n){return n===undefined?i:(i=n,r=!0,t)};t.sumValue=function(n){return t.value(i+n),t};t.sumValueObj=function(n){return t.sumValue(n.value()),t};t.hasValue=function(){return i!==null&&i!==undefined};t.isChanged=function(){return r};t.commit=function(){return r=!1,t}};
//# sourceMappingURL=DOMinus.min.js.map
